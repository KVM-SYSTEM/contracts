syntax = "proto3";

package measure;

option go_package = "https://github.com/KVM-SYSTEM/contracts;core_server";

import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";
//Models

message Measure {
    string _id = 1;
    string name = 2;
    string full_name = 3;
    google.protobuf.Timestamp createdAt = 4;
    google.protobuf.Timestamp updatedAt = 5; 
}

message Material {
    string _id = 1;
    string title = 2;
    Measure measure = 3;
    int64 cost = 4;
    int64 weight = 5;
    string manufacturer = 6;
    string barcode = 7;
    string img = 8;
    string sectionId = 9;
    google.protobuf.Timestamp createdAt = 10;
    google.protobuf.Timestamp updatedAt = 11; 
}
message Divide {
    string _id = 1;
    string title = 2; 
    string user = 3; 
    repeated string priceSections = 4; 
    string index = 5;
}
message Section {
    string _id = 1;
    string title = 2;
}
//Get Material
message GetMaterialReq {
    string _id = 1;
}
message GetMaterialRes {
    Material material = 1;
}
message GetManyMaterialRes {
    repeated Material materials = 1;
}
//Add Material
message AddMaterialReq {
    string title = 1;
    string measure = 2;
    int64 cost = 3;
    int64 weight = 4;
    string manufacturer = 5;
    string barcode = 6;
    string img = 7;
    string sectionId = 8;
}
message AddMaterialRes {
    string _id = 1;
}

//Delete Material 
message DeleteMaterialReq {
    string _id = 1;
}
//Get Divides
message GetManyDividesRes {
    repeated Divide divides = 1;
}
message GetDivideReq {
    string _id = 1;
}
message GetDivideRes {
    Divide divide = 1;
};

//Get Sections
message GetManySectionsRes {
    repeated Section sections = 1;
}
message GetSectionReq {
    string _id = 1;
}
message GetSectionRes {
    Divide divide = 1;
};

service MaterialService{
    rpc Add(AddMaterialReq) returns (AddMaterialRes);
    rpc Get(GetMaterialReq) returns (GetMaterialRes);
    rpc GetMany(google.protobuf.Empty) returns (GetManyMaterialRes);
    rpc Delete(DeleteMaterialReq) returns (google.protobuf.Empty);
}

service DivideService{
    rpc GetMany(google.protobuf.Empty) returns (GetManyDividesRes);
    rpc Get(GetDivideReq) returns (GetDivideRes);
}

service SectionService{
    rpc GetMany(google.protobuf.Empty) returns (GetManySectionsRes);
    rpc Get(GetSectionReq) returns (GetSectionRes);
}

